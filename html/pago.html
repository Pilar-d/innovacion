<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pago - EcoTech-Solution</title>

  <!-- Tus estilos y Bootstrap 5.0.2 -->
  <link rel="stylesheet" href="/css/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Concert+One&display=swap" rel="stylesheet" />
  
  <!-- Bootstrap Bundle JS para funcionalidades -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
   
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <!-- Navbar igual que en tu diseño -->
  <nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#hero-carousel">
        <img src="/imagenes/logo.png" width="100" height="70" alt="" style="padding-right: 10px; border-radius: 50%;" />EcoTech SoluTion
      </a>
      <div class="d-flex align-items-center">

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContenido" aria-controls="navbarContenido" aria-expanded="true" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="navbarContenido">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 bg-dark">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="menu.html">Menus</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html">Nosotros</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Contenido principal del formulario de pago -->
<main class="container my-5 pt-5 custom-container">
  <h2 class="mb-4">Formulario de Pago</h2>
  <div class="row">
    <!-- Columna Resumen de Compra -->
    <div class="col-md-6 mb-4">
      <h4>Resumen de tu pedido</h4>
      <div id="resumenCarrito" class="border p-3" style="max-height: 320px; overflow-y: auto;">
        <!-- Aquí va el resumen dinámico -->
      </div>
        <!-- Botones aceptar y cancelar -->
      <div class="mb-3 d-flex gap-3">
        <button id="btnAceptar" class="btn btn-success flex-grow-1">Aceptar</button>
        <button id="btnCancelar" class="btn btn-danger flex-grow-1">Cancelar</button>
      </div>
    </div>

    <!-- Columna Formulario de Pago -->
    <div class="col-md-6">

    

      <form id="formPago" class="needs-validation" novalidate>
        <h5>Datos Personales</h5>
        <div class="mb-3">
          <label for="nombreCompleto" class="form-label">Nombre completo</label>
          <input type="text" class="form-control" id="nombreCompleto" placeholder="Juan Pérez" required disabled />
          <div class="invalid-feedback">Por favor ingresa tu nombre completo.</div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Correo electrónico</label>
          <input type="email" class="form-control" id="email" placeholder="correo@ejemplo.com" required disabled />
          <div class="invalid-feedback">Por favor ingresa un correo válido.</div>
        </div>

        <h5>Datos Bancarios</h5>
        <div class="mb-3">
          <label for="numeroTarjeta" class="form-label">Número de tarjeta</label>
          <input
            type="text"
            class="form-control"
            id="numeroTarjeta"
            placeholder="1234 5678 9012 3456"
            maxlength="19"
            pattern="[\d\s]{13,19}"
            required
            disabled
          />
          <div class="invalid-feedback">Por favor ingresa un número de tarjeta válido.</div>
        </div>

        <div class="row">
          <div class="col-6 mb-3">
            <label for="fechaExpiracion" class="form-label">Fecha de expiración</label>
            <input type="month" class="form-control" id="fechaExpiracion" required min="2023-06" disabled />
            <div class="invalid-feedback">Por favor ingresa la fecha de expiración.</div>
          </div>

          <div class="col-6 mb-3">
            <label for="cvv" class="form-label">CVV</label>
            <input
              type="password"
              class="form-control"
              id="cvv"
              placeholder="123"
              maxlength="4"
              pattern="\d{3,4}"
              required
              disabled
            />
            <div class="invalid-feedback">Por favor ingresa un CVV válido (3 o 4 dígitos).</div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100" disabled>Pagar ahora</button>
      </form>
    </div>
  </div>
</main>
  <!-- Footer igual que en tu diseño -->
  <footer>
    <div class="icono-social text-center py-3">
      <ul id="iconos" class="list-unstyled d-flex justify-content-center gap-3 mb-2">
        <li><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" class="icono-red" /></li>
        <li><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" class="icono-red" /></li>
        <li><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" class="icono-red" /></li>
      </ul>
      <p>© 2025 Startup-ECotech - Todos los derechos reservados a Cristobal Barriga.</p>
    </div>
  </footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const resumen = document.getElementById("resumenCarrito");
    const carritoGuardado = localStorage.getItem("carrito");
    const totalCarritoDiv = document.createElement("div");
    totalCarritoDiv.className = "mt-3 text-end fw-bold fs-5";
    totalCarritoDiv.id = "totalCarrito";

    if (!carritoGuardado) {
      resumen.innerHTML = "<p>No hay productos en tu carrito.</p>";
      return;
    }

    const carrito = JSON.parse(carritoGuardado);
    if (carrito.length === 0) {
      resumen.innerHTML = "<p>No hay productos en tu carrito.</p>";
      return;
    }

    let html = '<ul class="list-group">';
    let total = 0;

    carrito.forEach(item => {
      const subtotal = item.precio * item.cantidad;
      total += subtotal;

      html += `
        <li class="list-group-item">
          <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <img src="${item.imagen}" alt="${item.nombre}" style="width: 50px; height: 50px; object-fit: cover;" class="rounded me-3">
              <div>
                <strong>${item.nombre}</strong><br>
                <small>${item.cantidad} × $${item.precio.toLocaleString()} = <strong>$${subtotal.toLocaleString()}</strong></small>
              </div>
            </div>
          </div>
        </li>`;
    });

    html += "</ul>";
    resumen.innerHTML = html;

    totalCarritoDiv.textContent = `Total: $${total.toLocaleString()}`;
    resumen.appendChild(totalCarritoDiv);

    const btnAceptar = document.getElementById("btnAceptar");
    const btnCancelar = document.getElementById("btnCancelar");
    const formPago = document.getElementById("formPago");

    function habilitarFormulario() {
      [...formPago.elements].forEach(el => el.disabled = false);
    }

    btnAceptar.addEventListener("click", (e) => {
      e.preventDefault();
      habilitarFormulario();
      btnAceptar.disabled = true;
      btnCancelar.disabled = true;
    });

    btnCancelar.addEventListener("click", (e) => {
      e.preventDefault();
      window.location.href = "menu.html";
    });

    formPago.addEventListener("submit", (event) => {
      event.preventDefault();
      if (!formPago.checkValidity()) {
        event.stopPropagation();
      } else {
        localStorage.removeItem("carrito");
        window.location.href = "gracias.html";
      }
      formPago.classList.add("was-validated");
    });
  });
</script>



<style>
    #resumenCarrito {
  max-height: 320px; /* aprox para 5 items */
  overflow-y: auto;  /* activa scroll si se excede altura */
}
#resumenCarrito {
  max-height: 320px; /* altura suficiente para 5 items aprox */
  overflow-y: auto;
}


</style>
</body>
</html>
